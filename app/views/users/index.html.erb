<%= render 'layouts/error', message: @booknew %>
<div class="container-fluid pt-4">
  <div class="row">
    <div class="col-3 offset-9"><%= render 'layouts/search' %></div>
    <div class="col-md-3">
      <%= render 'layouts/profile', user: current_user %>
      <div id="newbook-template">
        <%= render 'layouts/booknew', book: @booknew %>
      </div>
      <h2 id="open-newbook-template"><i class="fa-solid fa-circle-right"></i></h2>
    </div>
    <div class="col-md-8 offset-md-1">
      <h2>Users</h2>
      <div><%=link_to "グループを作成する",new_group_path %> | <%=link_to "グループ一覧",groups_path %></div>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">image</td>
            <th scope="col">name</td>
            <th scope="col"></th>
            <th></th>
            <th></th>
            <th colspan="5"></th>
          </tr>
        </thead>
        <tbody>
        <% @users.each do |user| %>
          <tr>
            <td><%= image_tag user.get_profile_image(80,80) %></td>
            <td><%= user.name %></td>
            <td>
              フォロー数: <%= user.followings.count %><br/>
              フォロワー数: <%= user.followers.count %>
            </td>
            <td>
              <% if user_signed_in? && current_user != user %>
                <% if current_user.following?(user) %>
                  <%= link_to "フォロー外す", user_relationships_path(user.id), method: :delete %>
                <% else %>
                  <%= link_to "フォローする", user_relationships_path(user.id), method: :post %>
                <% end %>
              <% end %>
            </td>
            <td><%= link_to user_path(user) do %>Show<% end %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>